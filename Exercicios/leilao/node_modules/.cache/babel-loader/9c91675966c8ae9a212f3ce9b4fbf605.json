{"ast":null,"code":"var _jsxFileName = \"/home/juan/Faculdade/PPDM/Exerc\\xEDcios/leilao/src/components/Detalhes.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport { db } from \"../conectafb\";\n\nconst Detalhes = () => {\n  const {\n    id\n  } = useParams();\n  const [obra, setObra] = useState({});\n  const [aviso, setAviso] = useState(\"\");\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n\n  const getObra = async id => {\n    const doc = await db.collection(\"obras\").doc(id).get();\n\n    if (doc.exists) {\n      setObra({\n        id: doc.id,\n        ...doc.data()\n      });\n    } else {\n      // doc.data() will be undefined in this case\n      console.log(\"Erro...\");\n    } //    console.log(doc);\n\n  }; // indica o que será executado logo após a renderização deste componente\n  // dependente do id que foi passado por parâmetro\n\n\n  useEffect(() => {\n    getObra(id);\n  }, [id]);\n\n  const gravaLance = (data, e) => {\n    try {\n      db.collection(\"obras\").doc(id).collection(\"lances\").add(data);\n      setAviso(\"Ok! Lance cadastrado com sucesso\");\n    } catch (erro) {\n      setAviso(\"Erro: \" + erro);\n    }\n\n    tempoAviso();\n    e.target.reset();\n  };\n\n  const tempoAviso = () => {\n    setTimeout(() => {\n      setAviso(\"\");\n    }, 5000);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-6 mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: obra.foto,\n    className: \"card-img-top img-fluid\",\n    alt: \"Quadro\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 29\n    }\n  }, obra.titulo), /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 29\n    }\n  }, \"Autor:\", obra.autor), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }, obra.descricao), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }\n  }, \"Lance M\\xEDnimo:\", obra.minimo ? obra.minimo.toLocaleString(\"pt-br\", {\n    style: \"currency\",\n    currency: \"BRL\"\n  }) : \"\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-6 mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-danger btn-lg btn-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, \"GOSTOU? D\\xCA UM LANCE!\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 29\n    }\n  }, \"* Os leil\\xF5es ocorrem no \\xFAltimo dia \\xFAtil do m\\xEAs\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(gravaLance),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"far fa-user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 45\n    }\n  }))), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Nome Completo\",\n    name: \"nome\",\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    class: \"fas fa-at\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 45\n    }\n  }))), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    className: \"form-control\",\n    placeholder: \"E-mail para contato\",\n    name: \"email\",\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    class: \"fas fa-phone\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 45\n    }\n  }))), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Telefone (com DDD)\",\n    name: \"fone\",\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    class: \"fas fa-dollar-sign\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 45\n    }\n  }))), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    className: \"form-control\",\n    placeholder: \"R$ do seu lance\",\n    name: \"valor\",\n    ref: register({\n      required: true,\n      min: obra.minimo\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: (errors.nome || errors.email || errors.fone || errors.valor) && \"alert alert-danger mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, errors.valor && /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 54\n    }\n  }, \"Informe um lance superior ao lance m\\xEDnimo... \"), (errors.nome || errors.email || errors.fone) && /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 45\n    }\n  }, \"Por favor, preencha todos os campos\")), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"btn btn-danger float-right mt-3\",\n    value: \"Enviar Lance\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    className: \"btn btn-success float-left mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 33\n    }\n  }, \"Retornar\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: aviso && \"alert alert-danger mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 21\n    }\n  }, aviso && /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 35\n    }\n  }, aviso)))));\n};\n\nexport default Detalhes;","map":{"version":3,"sources":["/home/juan/Faculdade/PPDM/Exercícios/leilao/src/components/Detalhes.js"],"names":["React","useEffect","useState","Link","useParams","useForm","db","Detalhes","id","obra","setObra","aviso","setAviso","register","handleSubmit","errors","getObra","doc","collection","get","exists","data","console","log","gravaLance","e","add","erro","tempoAviso","target","reset","setTimeout","foto","titulo","autor","descricao","minimo","toLocaleString","style","currency","required","min","nome","email","fone","valor"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\n\nimport { db } from \"../conectafb\";\n\nconst Detalhes = () => {\n    const { id } = useParams();\n\n    const [obra, setObra] = useState({});\n    const [aviso, setAviso] = useState(\"\");\n\n    const { register, handleSubmit, errors } = useForm();\n\n    const getObra = async (id) => {\n        const doc = await db.collection(\"obras\").doc(id).get();\n\n        if (doc.exists) {\n            setObra({ id: doc.id, ...doc.data() });\n        } else {\n            // doc.data() will be undefined in this case\n            console.log(\"Erro...\");\n        }\n\n        //    console.log(doc);\n    };\n\n    // indica o que será executado logo após a renderização deste componente\n    // dependente do id que foi passado por parâmetro\n    useEffect(() => {\n        getObra(id);\n    }, [id]);\n\n    const gravaLance = (data, e) => {\n        try {\n            db.collection(\"obras\").doc(id).collection(\"lances\").add(data);\n            setAviso(\"Ok! Lance cadastrado com sucesso\");\n        } catch (erro) {\n            setAviso(\"Erro: \" + erro);\n        }\n        tempoAviso();\n\n        e.target.reset();\n    };\n\n    const tempoAviso = () => {\n        setTimeout(() => {\n            setAviso(\"\");\n        }, 5000);\n    };\n\n    return (\n        <div className=\"container\">\n            <div className=\"row\">\n                <div className=\"col-sm-6 mt-2\">\n                    <div className=\"card\">\n                        <img\n                            src={obra.foto}\n                            className=\"card-img-top img-fluid\"\n                            alt=\"Quadro\"\n                        />\n                        <div className=\"card-body\">\n                            <h4 className=\"card-title\">{obra.titulo}</h4>\n                            <h6 className=\"card-title\">\n                                Autor:\n                {obra.autor}\n                            </h6>\n                            <p className=\"card-text\">{obra.descricao}</p>\n                            <p className=\"card-text\">\n                                Lance Mínimo:\n                {obra.minimo\n                                    ? obra.minimo.toLocaleString(\"pt-br\", {\n                                        style: \"currency\",\n                                        currency: \"BRL\",\n                                    })\n                                    : \"\"}\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-sm-6 mt-2\">\n                    <button className=\"btn btn-danger btn-lg btn-block\">\n                        GOSTOU? DÊ UM LANCE!\n          </button>\n                    <div className=\"card\">\n                        <div className=\"card-body\">\n                            <p className=\"card-text\">\n                                * Os leilões ocorrem no último dia útil do mês\n              </p>\n                            <form onSubmit={handleSubmit(gravaLance)}>\n                                <div className=\"input-group mt-3\">\n                                    <div className=\"input-group-prepend\">\n                                        <span className=\"input-group-text\">\n                                            <i className=\"far fa-user\"></i>\n                                        </span>\n                                    </div>\n                                    <input\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        placeholder=\"Nome Completo\"\n                                        name=\"nome\"\n                                        ref={register({ required: true })}\n                                    />\n                                </div>\n                                <div className=\"input-group mt-3\">\n                                    <div className=\"input-group-prepend\">\n                                        <span className=\"input-group-text\">\n                                            <i class=\"fas fa-at\"></i>\n                                        </span>\n                                    </div>\n                                    <input\n                                        type=\"email\"\n                                        className=\"form-control\"\n                                        placeholder=\"E-mail para contato\"\n                                        name=\"email\"\n                                        ref={register({ required: true })}\n                                    />\n                                </div>\n                                <div className=\"input-group mt-3\">\n                                    <div className=\"input-group-prepend\">\n                                        <span className=\"input-group-text\">\n                                            <i class=\"fas fa-phone\"></i>\n                                        </span>\n                                    </div>\n                                    <input\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        placeholder=\"Telefone (com DDD)\"\n                                        name=\"fone\"\n                                        ref={register({ required: true })}\n                                    />\n                                </div>\n                                <div className=\"input-group mt-3\">\n                                    <div className=\"input-group-prepend\">\n                                        <span className=\"input-group-text\">\n                                            <i class=\"fas fa-dollar-sign\"></i>\n                                        </span>\n                                    </div>\n                                    <input\n                                        type=\"number\"\n                                        className=\"form-control\"\n                                        placeholder=\"R$ do seu lance\"\n                                        name=\"valor\"\n                                        ref={register({ required: true, min: obra.minimo })}\n                                    />\n                                </div>\n                <div\n                                    className={\n                                        (errors.nome ||\n                                            errors.email ||\n                                            errors.fone ||\n                                            errors.valor) &&\n                                        \"alert alert-danger mt-3\"\n                                    }\n                                >\n                                    {errors.valor && <span>Informe um lance superior ao lance mínimo... </span>}\n\n                                    {(errors.nome ||\n                                        errors.email ||\n                                        errors.fone) && (\n                                            <span>Por favor, preencha todos os campos</span>\n                                        )}\n                                </div>\n\n                                <input\n                                    type=\"submit\"\n                                    className=\"btn btn-danger float-right mt-3\"\n                                    value=\"Enviar Lance\"\n                                />\n                                <Link to={\"/\"} className=\"btn btn-success float-left mt-3\">\n                                    Retornar\n                                  </Link>\n                            </form>\n                        </div>\n                    </div>\n\n                    <div className={aviso && \"alert alert-danger mt-3\"}>\n                        {aviso && <span>{aviso}</span>}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Detalhes;"]},"metadata":{},"sourceType":"module"}